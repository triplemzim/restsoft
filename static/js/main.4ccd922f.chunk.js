(this.webpackJsonprsfrontadmin=this.webpackJsonprsfrontadmin||[]).push([[0],{111:function(e,t,a){},182:function(e,t,a){e.exports=a(263)},187:function(e,t,a){},262:function(e,t,a){},263:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),c=a.n(o),i=(a(187),a(16)),l=a.n(i),s=a(29),u=a(18),m=a(19),d=a(20),p=a(21),h=a(45),f=a(311),E=a(32),g=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(f.a,{variant:"contained",color:"primary",component:E.b,to:"/menuManagement"},"Go to Create Menu"))}}]),a}(n.Component),b=a(325),v=a(326),I=a(319),O=a(323),C=a(322),y=a(318),N=a(320),j=a(321),w=a(266),x=a(339),k=(a(111),a(331)),M={LOGIN:"/login",HOME:"/home",MENU_MANAGEMENT:"/menuManagement"},A="/",D={createMenuApi:"/create-menu",getMenuApi:"/get-all-menu",deleteMenuApi:"/delete-menu"},S=function(e){return k.a.post("webadmin",D.createMenuApi,e)},_=function(e){return k.a.post("webadmin",D.getMenuApi,e)},P=function(e){return k.a.post("webadmin",D.deleteMenuApi,e)},L=a(324),T=a(337),F=a(317),G=a(315),H=a(316),R=a(314);function U(e){return r.a.createElement(T.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(R.a,{id:"alert-dialog-title",style:{marginRight:"200px"}},e.title),r.a.createElement(G.a,null,r.a.createElement(H.a,{id:"alert-dialog-description"},e.body)),r.a.createElement(F.a,null,r.a.createElement(f.a,{onClick:e.handleClose,color:"primary"},"Cancel"),r.a.createElement(f.a,{onClick:function(){e.handleClose(),e.onConfirm()},color:"primary",autoFocus:!0},"OK")))}var W=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).deleteMenuItem=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("menuCode should be deleted",n.state.selectedMenuCodeForDeletion),t={body:{menu_code:n.state.selectedMenuCodeForDeletion}},e.prev=2,e.next=5,P(t);case 5:n.setState({selectedMenuCodeForDeletion:""}),n.props.shouldUpdateMenuItems(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),n.closeDeleteDialog=function(){n.setState({isOpenDeleteConfirmationDialog:!1})},n.handleDelete=function(e){n.setState({isOpenDeleteConfirmationDialog:!0,selectedMenuCodeForDeletion:e})},n.state={isOpenDeleteConfirmationDialog:!1,selectedMenuCodeForDeletion:""},n}return Object(m.a)(a,[{key:"simpleTable",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.a,{component:w.a,className:"table-max-height"},r.a.createElement(I.a,{stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(N.a,{className:"table-head"},r.a.createElement(j.a,null,r.a.createElement(C.a,null,"Menu Code"),r.a.createElement(C.a,{align:"center"},"Name"),r.a.createElement(C.a,{align:"center"},"Category"),r.a.createElement(C.a,{align:"right"},"Price"),r.a.createElement(C.a,{align:"center"}))),r.a.createElement(O.a,null,this.props.menuItems.map((function(t,a){return r.a.createElement(j.a,{key:a},r.a.createElement(C.a,{align:"left"}," ",t.menu_code," "),r.a.createElement(C.a,{align:"center"},t.name),r.a.createElement(C.a,{align:"center"},t.category),r.a.createElement(C.a,{align:"right"},t.price),r.a.createElement(C.a,{align:"center"},r.a.createElement(L.a,{"aria-label":"delete",component:"span",onClick:function(){e.handleDelete(t.menu_code)}},r.a.createElement(x.a,null))))}))))),r.a.createElement(U,{open:this.state.isOpenDeleteConfirmationDialog,handleClose:this.closeDeleteDialog,title:"Delete Item",body:"Are you sure?",onConfirm:this.deleteMenuItem}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.simpleTable())}}]),a}(n.Component),q=a(332),B=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).formInputNames={menuCode:"menuCode",name:"name",category:"category",price:"price"},n.submitForm=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={body:{name:n.state.name,menu_code:n.state.menuCode,price:n.state.price,category:n.state.category}},e.prev=1,e.next=4,S(t);case 4:n.props.shouldUpdateMenuItems(),n.setState({menuCode:""}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),Object.freeze(n.formInputNames),n.state={menuCode:"",name:"",category:"",price:0},n}return Object(m.a)(a,[{key:"onChangeInput",value:function(e,t){switch(t){case this.formInputNames.menuCode:this.setState({menuCode:e.target.value});break;case this.formInputNames.name:this.setState({name:e.target.value});break;case this.formInputNames.category:this.setState({category:e.target.value});break;case this.formInputNames.price:this.setState({price:e.target.value});break;default:return}}},{key:"isButtonEnabled",value:function(){return""===this.state.menuCode||""===this.state.name||0===this.state.price}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"menu-item-header"},"Add Menu Item"),r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(b.a,{container:!0,direction:"column",justify:"space-evenly"},r.a.createElement(b.a,{Item:!0},r.a.createElement(q.a,{className:"text-field",required:!0,id:"standard-basic",label:"Menu Code",value:this.state.menuCode,onChange:function(t){return e.onChangeInput(t,e.formInputNames.menuCode)}})),r.a.createElement(b.a,{Item:!0},r.a.createElement(q.a,{className:"text-field",required:!0,id:"standard-basic",label:"Name",onChange:function(t){return e.onChangeInput(t,e.formInputNames.name)}})),r.a.createElement(b.a,{Item:!0},r.a.createElement(q.a,{className:"text-field",id:"standard-basic",label:"Category",onChange:function(t){return e.onChangeInput(t,e.formInputNames.category)}})),r.a.createElement(b.a,{Item:!0},r.a.createElement(q.a,{className:"text-field",required:!0,id:"standard-basic",label:"Price",type:"number",onChange:function(t){return e.onChangeInput(t,e.formInputNames.price)}})),r.a.createElement(b.a,{Item:!0},r.a.createElement("div",{className:"add-menu-button"},r.a.createElement(f.a,{variant:"contained",color:"primary",onClick:this.submitForm,disabled:this.isButtonEnabled()},"Add Menu Item"))))))}}]),a}(n.Component),J=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getMenuItems=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,_(t);case 4:a=e.sent,console.log("menuItems",a),n.setState({menuItems:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),n.shouldUpdateMenuItems=function(){n.getMenuItems()},n.state={menuItems:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getMenuItems()}},{key:"createData",value:function(e,t,a,n){return{menu_code:e,name:t,category:a,price:n}}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(b.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:1,className:"full-height"},r.a.createElement(b.a,{Item:!0,xs:5},r.a.createElement(v.a,{className:"basic-margin-padding"},r.a.createElement(B,{shouldUpdateMenuItems:this.shouldUpdateMenuItems}))),r.a.createElement(b.a,{Item:!0,xs:7},r.a.createElement(v.a,{className:"basic-margin-padding"},r.a.createElement(W,{menuItems:this.state.menuItems,shouldUpdateMenuItems:this.shouldUpdateMenuItems})))))}}]),a}(n.Component),Y=a(5),z=a(338),V=a(327),K=a(328),$=a(336),Q=a(334),X=a(156),Z=a.n(X),ee=a(102),te=a(77),ae=Object(n.createContext)();function ne(){return r.a.createElement(ee.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(E.b,{color:"inherit",href:""},"RestSoft")," ",(new Date).getFullYear(),".")}var re=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onEmailChange=function(e){n.setState({email:e.target.value})},n.onPasswordChange=function(e){n.setState({password:e.target.value})},n.onSubmit=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("this function is running",n.state.email,n.state.password),a=n.context,e.prev=3,e.next=6,te.a.signIn(n.state.email,n.state.password);case 6:a.userHasAuthenticated(!0),r=n.props.location.state||{from:M.HOME},o=r.from,n.props.history.replace(o),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),n.state={email:"",password:""},n}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.context.isAuthenticated&&this.props.history.replace(M.HOME)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(v.a,{component:"main",maxWidth:"xs"},r.a.createElement(V.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(z.a,{className:e.avatar},r.a.createElement(Z.a,null)),r.a.createElement(ee.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:this.state.email,onChange:this.onEmailChange}),r.a.createElement(q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:this.state.password,autoComplete:"current-password",onChange:this.onPasswordChange}),r.a.createElement(K.a,{control:r.a.createElement($.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:this.onSubmit},"Sign In"),r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:!0},r.a.createElement(E.b,{href:"#",variant:"body2"},"Forgot password?"))))),r.a.createElement(Q.a,{mt:8},r.a.createElement(ne,null)))}}]),a}(n.Component);re.contextType=ae;var oe=Object(Y.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(4),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),{withTheme:!0})(re),ce=a(157),ie=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.context,t=this.props,a=t.component,n=Object(ce.a)(t,["component"]);return r.a.createElement(h.b,Object.assign({},n,{render:function(t){return!0===e.isAuthenticated?r.a.createElement(a,t):r.a.createElement(h.a,{to:{pathname:M.LOGIN,state:{from:t.location}}})}}))}}]),a}(n.Component);ie.contextType=ae;var le=ie;function se(){return r.a.createElement(h.d,null,r.a.createElement(h.a,{exact:!0,from:A,to:M.LOGIN}),r.a.createElement(h.b,{path:M.LOGIN,component:oe}),r.a.createElement(le,{path:M.HOME,component:g}),r.a.createElement(le,{path:M.MENU_MANAGEMENT,component:J}))}var ue=a(329),me=a(330),de=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleLogOut=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.context.userHasAuthenticated,e.next=3,te.a.signOut();case 3:t(!1);case 4:case"end":return e.stop()}}),e)}))),n.state={},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.context.isAuthenticated,t=this.props.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(ue.a,{position:"static"},r.a.createElement(me.a,null,r.a.createElement(f.a,{component:E.b,to:M.HOME,color:"inherit"},"RestSoft Admin Panel"),r.a.createElement("div",{className:t.title}),e?r.a.createElement(f.a,{color:"inherit",onClick:this.handleLogOut},"Logout"):null)))}}]),a}(n.Component);de.contextType=ae;var pe=Object(Y.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}),{withTheme:!0})(de),he=(a(262),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).userHasAuthenticated=function(e){n.setState({isAuthenticated:e})},n.onLoad=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.currentSession();case 3:n.userHasAuthenticated(!0),console.log("onLoad success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"No current user"!==e.t0&&(alert(e.t0),n.userHasAuthenticated(!1));case 10:n.setState({isAuthenticating:!1});case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),n.state={isAuthenticated:!1,isAuthenticating:!0},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.onLoad()}},{key:"render",value:function(){return!this.state.isAuthenticating&&r.a.createElement(Q.a,null,r.a.createElement(ae.Provider,{value:{isAuthenticated:this.state.isAuthenticated,userHasAuthenticated:this.userHasAuthenticated}},this.state.isAuthenticated?r.a.createElement(n.Fragment,null,r.a.createElement(pe,null),r.a.createElement(Q.a,{className:"root-container"},r.a.createElement(w.a,{elevation:3,className:"root-paper"},r.a.createElement(se,null)))):r.a.createElement(Q.a,{className:"sign-in-root-container"},r.a.createElement(w.a,{elevation:3,className:"sign-in-root-paper"},r.a.createElement(se,null)))))}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe={REGION:"ap-southeast-1",URL:"https://10i3qjmcvg.execute-api.ap-southeast-1.amazonaws.com/dev-muhim"},Ee={REGION:"ap-southeast-1",USER_POOL_ID:"ap-southeast-1_9J0gInDEe",APP_CLIENT_ID:"78p7gt6ha1ave9isfe7otl0f68",IDENTITY_POOL_ID:"ap-southeast-1:5d85bb85-89b4-42eb-95af-ef9fc37405a1"};a(50).a.configure({Auth:{mandatorySignIn:!0,region:Ee.REGION,userPoolId:Ee.USER_POOL_ID,identityPoolId:Ee.IDENTITY_POOL_ID,userPoolWebClientId:Ee.APP_CLIENT_ID},API:{endpoints:[{name:"webadmin",endpoint:fe.URL,region:fe.REGION}]}}),c.a.render(r.a.createElement(E.a,null,r.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[182,1,2]]]);
//# sourceMappingURL=main.4ccd922f.chunk.js.map